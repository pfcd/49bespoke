!function(e,t,a,o){"use strict";function l(t){for(let a in t){if(!t.hasOwnProperty(a))continue;let o=`#wcpt_table_styling\\[${a}\\]\\[color\\]`,l=`#wcpt_table_styling\\[${a}\\]\\[size\\]`,n=`.color-field #wcpt_table_styling\\[${a}\\]`;e(l).length&&e(l).val(""),e(o).length&&""===t[a].color&&(e(o).val(""),e(o).closest(".color-size-field").find(".wp-color-result").removeAttr("style")),e(n).length&&""===t[a]&&(e(n).val(""),e(n).closest(".color-field").find(".wp-color-result").removeAttr("style")),"border_outer"!==a&&"border_header"!==a&&"border_horizontal_cell"!==a&&"border_vertical_cell"!==a&&"border_bottom"!==a&&"header_font"!==a&&"cell_font"!==a&&"hyperlink_font"!==a&&"button_font"!==a&&"disabled_button_font"!==a&&"quantity_font"!==a&&"text_border"!==a&&"dropdown_border"!==a||(e(o).val(t[a].color),e(o).wpColorPicker("color",t[a].color)),"header_bg"!==a&&"cell_bg"!==a&&"button_bg"!==a&&"button_bg_hover"!==a&&"button_disabled_bg"!==a&&"button_quantity_bg"!==a&&"dropdown_background"!==a&&"dropdown_font"!==a&&"checkboxes_border"!==a&&"text_background"!==a&&"text_font"!==a||(e(n).val(t[a]),e(n).wpColorPicker("color",t[a])),"cell_backgrounds"!=a&&"corner_style"!=a||e('input[name="wcpt_table_styling['+a+']"][value="'+t[a]+'"]').prop("checked",!0),!e(l).length||"border_outer"!==a&&"border_header"!==a&&"border_horizontal_cell"!==a&&"border_vertical_cell"!==a&&"border_bottom"!==a&&"text_border"!==a&&"dropdown_border"!==a||e(l).val(t[a].size)}}t.design_template_options||(t.design_template_options=o.design_defaults_with_options,t.design_template_defaults=o.design_template_defaults),e(a).on("change",".design_templates",(function(){let a=e(this).val(),o=t.design_template_options[a];t.skipTemplateChange=!0,l(o),t.skipTemplateChange=!1})),e.fn.wpColorPicker&&e(".wpt-custom-color-size-field .color-picker").wpColorPicker({change:function(t,a){const o=e(t.target).closest(".color-size-field").find("input[type=number]"),l=o.attr("name");!["wcpt_table_styling[border_header][size]","wcpt_table_styling[border_horizontal_cell][size]","wcpt_table_styling[border_vertical_cell][size]","wcpt_table_styling[border_bottom][size]"].includes(l)||o.val()&&"0"!=o.val()||o.val("1")}}),e.fn.wpColorPicker&&e(".color-picker").wpColorPicker({change:function(a,o){if(t.skipTemplateChange)return;let l=e(".design_templates:checked").val();var n=o.color.toString(),r=e(a.target).attr("name").match(/wcpt_table_styling\[(.*?)\]/),i=r?r[1]:null;i&&t.design_template_options[l][i]&&t.design_template_options[l][i].hasOwnProperty("color")?t.design_template_options[l][i].color=n:i&&(t.design_template_options[l][i]=n)}}),e(a).on("change",".color-size-field input",(function(a){if(t.skipTemplateChange)return;let o=e(".design_templates:checked").val(),l=e(a.target).attr("name"),n=e(this).val(),r=l.match(/wcpt_table_styling\[(.*?)\]/),i=r?r[1]:null;t.design_template_options[o][i].size=n})),e(a).on("change",".wpt_cell_backgrounds_field, .wpt_corner_style_field",(function(a){if(t.skipTemplateChange)return;let o=e(".design_templates:checked").val(),l=e(a.target).attr("name"),n=e(this).val(),r=l.match(/wcpt_table_styling\[(.*?)\]/),i=r?r[1]:null;t.design_template_options[o][i]=n})),e(a).on("click",'button[name="reset_design_settings"]',(function(t){t.preventDefault();const a=e(".design_templates:checked").val();l(o.design_template_defaults[a])})),e(a).on("click",'[data-open-lightbox="1"]',(function(){const t=e(this).data("lightbox-image"),a=e("body");a.find(".barn2-lightbox-content").remove();const o='<div class="barn2-lightbox-content"><img src="'+t+'"/></div>';a.append(o)})),e(a).on("click",".barn2-lightbox-content",(function(t){t.target===e(this)[0]&&e(this).remove()}));var n=function(e,t){var a,o=e.data("toggleVal");a="radio"===e.attr("type")?e.prop("checked")&&o==e.val():"checkbox"===e.attr("type")?void 0===o||1==o?e.prop("checked"):!e.prop("checked"):o==e.val(),t.toggle(a)};function r(t){"separate"===t.val()?(e(".field-lazyload input").prop({checked:!1,disabled:!0}).trigger("change").closest("td").addClass("disabled"),e("#lazyload-description-1").hide(),e("#lazyload-description-2").show(),e(".field-product_limit").closest("tr").removeClass("hidden")):(e(".field-lazyload input").prop({disabled:!1}).trigger("change").closest("td").removeClass("disabled"),e("#lazyload-description-2").hide(),e("#lazyload-description-1").show(),e(".field-lazyload input").is(":checked")&&e(".field-product_limit").closest("tr").addClass("hidden"))}e((function(){t.addEventListener("barn2-step-loaded",(t=>{"performance"===t.detail.step&&("separate"===t.detail.values.variations?(e("#lazyload-description-1").closest(".components-base-control").addClass("disabled").find("input").prop({checked:!1,disabled:!0}).trigger("change"),e("#lazyload-description-1").hide(),e("#lazyload-description-2").show()):(e("#lazyload-description-1").closest(".components-base-control").removeClass("disabled").find("input").prop({disabled:!1}).trigger("change"),e("#lazyload-description-2").hide(),e("#lazyload-description-1").show()))}),!1),wp.hooks.addAction("barn2_table_generator_render_fields","barn2_table_generator_render_fields",(function(){r(e(".field-variations select"))})),e(a).on("change",".field-variations select",(function(t){r(e(this))})),wp.hooks.addFilter("barn2_table_generator_update_table_details","barn2_table_generator_update_table_details",(function(t,a){return t.settings.lazyload=e(".field-lazyload input").prop("checked"),t})),e(".form-table .toggle-parent").each((function(){var t=e(this),a=t.closest(".form-table").find("."+t.data("child-class").replace(" ",",.")).closest("tr");n(t,a),t.on("change",(function(){n(t,a)}))})),e(".form-table .cache-toggle").length&&e(".form-table .cache-toggle").is(":checked")&&e('input[name="clear_cache"]').addClass("display"),e(".form-table .cache-toggle").on("click",(function(){e('input[name="clear_cache"]').toggleClass("display")})),e(a).on("click",'input[name="clear_cache"]',(function(a){a.preventDefault();const l=e(this);if(l.hasClass("ajax-processing"))return;l.addClass("ajax-processing");const n={action:"clear_table_cache",nonce:o.ajax_nonce};e.ajax({url:o.ajax_url,type:"POST",data:n}).done((function(e){t.location.href=o.settings_page_url}))})),e(a).on("change",'input[name="table_display"]',(function(t){e(".barn2-stepper__steps > .barn2-stepper__step:eq(1) .barn2-stepper__step-label").text(Barn2TableGenerator.steps.refine.extra_data["name_"+e(this).val()]),Barn2TableGenerator.steps.refine.name=Barn2TableGenerator.steps.refine.extra_data["name_"+e(this).val()],Barn2TableGenerator.steps.refine.title=Barn2TableGenerator.steps.refine.extra_data["title_"+e(this).val()],Barn2TableGenerator.steps.refine.description=Barn2TableGenerator.steps.refine.extra_data["description_"+e(this).val()]}))}))}(jQuery,window,document,product_table_admin_params);